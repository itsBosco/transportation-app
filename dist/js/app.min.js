var app=angular.module("TransportationApp",[]);app.controller("MainController",["$scope","$http",function($scope,$http){function getStops(){var tempID="";$http.get("dist/data/stops.json").then(function(results){results.data.forEach(function(stop){tempID!=stop.zone_id&&(stops.push(stop),tempID=stop.zone_id)})})}function getStopTimes(){$http.get("dist/data/stop_times.json").then(function(results){results.data.forEach(function(stopTimeInfo){stopTimes.push(stopTimeInfo)})})}function getDepartInfo(stop_id){var stopLoop=!1;$scope.stopTimes.forEach(function(stopTimeInfo){stopTimeInfo.stop_id!=stop_id||"number"!=typeof stopTimeInfo.trip_id||stopLoop||(getStopsForDeparture(stopTimeInfo.trip_id),stopLoop=!0)})}function getStopsForDeparture(trip_id){$scope.arrivalStations=[],stopTimes.forEach(function(stopTimeInfo){trip_id==stopTimeInfo.trip_id&&$scope.stops.forEach(function(stop){stop.stop_id==stopTimeInfo.stop_id&&$scope.arrivalStations.push(stop.stop_name)})})}var stops=[],stopTimes=[];$scope.setStopID=function(position){if("arrival"==position){var arrivalStopID;$scope.stops.forEach(function(stop){stop.stop_name==$scope.arrivalStation&&(arrivalStopID=stop.stop_id)})}else{var departureStopID;$scope.stops.forEach(function(stop){stop.stop_name==$scope.departureStation&&(departureStopID=stop.stop_id)}),getDepartInfo(departureStopID)}},$scope.stops=stops,$scope.stopTimes=stopTimes,getStops(),getStopTimes()}]);